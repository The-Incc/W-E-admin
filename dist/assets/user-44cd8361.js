import{j as e,q as Fe,T as v,P as o,r as i,S as h,aA as se,I as G,a as N,aE as J,B as j,bU as K,b8 as Ue,bT as We,c as Ae,W as Oe}from"./index-f18ba23b.js";import{k as M,g as u,i as Be,l as Me,T as te,h as $e,e as we,f as qe,j as He,S as Le,A as ze}from"./TableSortLabel-0e679cd9.js";import{L as Ge}from"./label-28a82b53.js";import{C as re}from"./Checkbox-23d81c25.js";import{B as I}from"./Button-4497fecf.js";import{O as Je,T as k}from"./TextField-72fc734d.js";import{I as Ke}from"./InputAdornment-302b6ae8.js";import{C as Qe}from"./Container-c72d9e4b.js";import{C as Ve}from"./Card-fedbf765.js";import"./Menu-68622a83.js";function le({query:s}){return e.jsx(M,{children:e.jsx(u,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(Fe,{sx:{textAlign:"center"},children:[e.jsx(v,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(v,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',s,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}le.propTypes={query:o.string};const Xe={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:4};function oe({id:s,selected:l,name:a,avatarUrl:p,company:c,role:g,isVerified:m,status:b,handleClick:d}){const[F,U]=i.useState(null),[P,W]=i.useState(!1),[t,T]=i.useState([]),E=C=>{U(C.currentTarget)},$=()=>{W(!0)},S=()=>{W(!1)};return i.useEffect(()=>{(async y=>{try{const R=await K.get(`calculate/results/${y}`);T(R.data.results[0]),console.log(R.data.results)}catch(R){console.error("Error fetching results:",R)}})(s)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(M,{hover:!0,tabIndex:-1,role:"checkbox",selected:l,onClick:$,children:[e.jsx(u,{padding:"checkbox",onClick:C=>C.stopPropagation(),children:e.jsx(re,{disableRipple:!0,checked:l,onChange:d})}),e.jsx(u,{component:"th",scope:"row",padding:"none",children:e.jsxs(h,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(se,{alt:a,src:p}),e.jsx(v,{variant:"subtitle2",noWrap:!0,children:a})]})}),e.jsx(u,{children:c}),e.jsx(u,{children:g}),e.jsx(u,{align:"center",children:m||"N/A"}),e.jsx(u,{children:e.jsx(Ge,{color:b==="banned"&&"error"||"success",children:b})}),e.jsx(u,{children:e.jsx(I,{variant:"contained",size:"small",color:"error",children:"Delete"})}),e.jsx(u,{align:"right",children:e.jsx(G,{onClick:E,children:e.jsx(N,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(J,{open:P,onClose:S,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(j,{sx:Xe,borderRadius:3,children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(se,{alt:a,src:p,style:{height:70,width:70}}),e.jsx(v,{variant:"subtitle2",noWrap:!0,style:{marginRight:"8px",fontWeight:600,fontSize:20},children:a})]}),e.jsx(j,{mt:3,children:e.jsx("span",{style:{fontWeight:600,fontSize:18},children:"Personal Information:"})}),e.jsxs(j,{direction:"row",spacing:4,sx:{display:"inline-flex",flexWrap:"wrap"},children:[e.jsxs(h,{spacing:1,mt:2,sx:{marginRight:2,marginBottom:2},children:[e.jsx("span",{style:{marginRight:"8px",fontWeight:600},children:"Email"}),e.jsx("p",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"8px 12px",display:"inline-block"},children:c})]}),e.jsxs(h,{spacing:1,mt:2,sx:{marginRight:2,marginBottom:2},children:[e.jsx("span",{style:{marginRight:"8px",fontWeight:600},children:"Phone Number"}),e.jsx("p",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"8px 12px",display:"inline-block"},children:m||"N/A"})]})]}),e.jsx(j,{mt:1,children:e.jsx("span",{style:{fontWeight:600,fontSize:18},children:"Calculator Results:"})})," ",e.jsxs(j,{direction:"row",spacing:4,sx:{display:"inline-flex",flexWrap:"wrap"},children:[e.jsxs(h,{spacing:1,mt:2,sx:{marginRight:2,marginBottom:2},children:[e.jsx("span",{style:{marginRight:"8px",fontWeight:600},children:"Income Replacement"}),e.jsxs("p",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"8px 12px",display:"inline-block"},children:["$ ",t==null?void 0:t.annualIncome]})]}),e.jsxs(h,{spacing:1,mt:2,sx:{marginRight:2,marginBottom:2},children:[e.jsx("span",{style:{marginRight:"8px",fontWeight:600},children:"Debt Elimination"}),e.jsxs("p",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"8px 12px",display:"inline-block"},children:["$ ",t==null?void 0:t.eliminateDebt]})]})," ",e.jsxs(h,{spacing:1,mt:2,sx:{marginRight:2,marginBottom:2},children:[e.jsx("span",{style:{marginRight:"8px",fontWeight:600},children:"Childcare"}),e.jsxs("p",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"8px 12px",display:"inline-block"},children:["$ ",t==null?void 0:t.childcare]})]})," ",e.jsxs(h,{spacing:1,mt:2,sx:{marginRight:2,marginBottom:2},children:[e.jsx("span",{style:{marginRight:"8px",fontWeight:600},children:"Extended Healthcare"}),e.jsxs("p",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"8px 12px",display:"inline-block"},children:["$ ",t==null?void 0:t.extendedHealthcare]})]})," ",e.jsxs(h,{spacing:1,mt:2,sx:{marginRight:2,marginBottom:2},children:[e.jsx("span",{style:{marginRight:"8px",fontWeight:600},children:"Education Fund"}),e.jsx("p",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"8px 12px",display:"inline-block"},children:"$300,000"})]}),e.jsxs(h,{spacing:1,mt:2,sx:{marginRight:2,marginBottom:2},children:[e.jsx("span",{style:{marginRight:"8px",fontWeight:600},children:"Emergency Fund"}),e.jsxs("p",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"8px 12px",display:"inline-block"},children:["$ ",t==null?void 0:t.emergencyFund]})]}),e.jsxs(h,{spacing:1,mt:2,sx:{marginRight:2,marginBottom:2},children:[e.jsx("span",{style:{marginRight:"8px",fontWeight:600},children:"Final Expenses "}),e.jsxs("p",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"8px 12px",display:"inline-block"},children:["$ ",t==null?void 0:t.finalExpense]})]})]})]})})]})}oe.propTypes={avatarUrl:o.any,company:o.any,handleClick:o.func,isVerified:o.any,name:o.any,role:o.any,selected:o.any,status:o.string};const Ye={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Ze(s,l,a){return s?Math.max(0,(1+s)*l-a):0}function ae(s,l,a){return s[a]===null?1:l[a]===null||l[a]<s[a]?-1:l[a]>s[a]?1:0}function _e(s,l){return s==="desc"?(a,p)=>ae(a,p,l):(a,p)=>-ae(a,p,l)}function De({inputData:s,comparator:l,filterName:a}){const p=s.map((c,g)=>[c,g]);return p.sort((c,g)=>{const m=l(c[0],g[0]);return m!==0?m:c[1]-g[1]}),s=p.map(c=>c[0]),a&&(s=s.filter(c=>c.name.toLowerCase().indexOf(a.toLowerCase())!==-1)),s}function ce({order:s,orderBy:l,rowCount:a,headLabel:p,numSelected:c,onRequestSort:g,onSelectAllClick:m}){const b=d=>F=>{g(F,d)};return e.jsx(Be,{children:e.jsxs(M,{children:[e.jsx(u,{padding:"checkbox",children:e.jsx(re,{indeterminate:c>0&&c<a,checked:a>0&&c===a,onChange:m})}),p.map(d=>e.jsx(u,{align:d.align||"left",sortDirection:l===d.id?s:!1,sx:{width:d.width,minWidth:d.minWidth},children:e.jsxs(Me,{hideSortIcon:!0,active:l===d.id,direction:l===d.id?s:"asc",onClick:b(d.id),children:[d.label,l===d.id?e.jsx(j,{sx:{...Ye},children:s==="desc"?"sorted descending":"sorted ascending"}):null]})},d.id))]})})}ce.propTypes={order:o.oneOf(["asc","desc"]),orderBy:o.string,rowCount:o.number,headLabel:o.array,numSelected:o.number,onRequestSort:o.func,onSelectAllClick:o.func};function de({emptyRows:s,height:l}){return s?e.jsx(M,{sx:{...l&&{height:l*s}},children:e.jsx(u,{colSpan:9})}):null}de.propTypes={emptyRows:o.number,height:o.number};function pe({numSelected:s,filterName:l,onFilterName:a}){return e.jsxs(Ue,{sx:{height:96,display:"flex",justifyContent:"space-between",p:p=>p.spacing(0,1,0,3),...s>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[s>0?e.jsxs(v,{component:"div",variant:"subtitle1",children:[s," selected"]}):e.jsx(Je,{value:l,onChange:a,placeholder:"Search user...",startAdornment:e.jsx(Ke,{position:"start",children:e.jsx(N,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),s>0?e.jsx(te,{title:"Delete",children:e.jsx(G,{children:e.jsx(N,{icon:"eva:trash-2-fill"})})}):e.jsx(te,{title:"Filter list",children:e.jsx(G,{children:e.jsx(N,{icon:"ic:round-filter-list"})})})]})}pe.propTypes={numSelected:o.number,filterName:o.string,onFilterName:o.func};function en(){const[s,l]=i.useState(!1),{token:a}=i.useContext(We),p=()=>l(!1),[c,g]=i.useState(0),[m,b]=i.useState(!1),[d,F]=i.useState([]),U=()=>{b(!1)},[P,W]=i.useState("asc"),[t,T]=i.useState([]),[E,$]=i.useState("fullName"),[S,C]=i.useState(""),[y,R]=i.useState(5),[w,he]=i.useState(""),[A,xe]=i.useState(""),[O,ge]=i.useState(""),[B,ue]=i.useState(""),[me,fe]=i.useState(null),[Q,V]=i.useState(""),[X,q]=i.useState(""),[Y,H]=i.useState(""),[Z,L]=i.useState(""),[je,z]=i.useState(!1),[be,_]=i.useState(""),[ye,D]=i.useState("success");i.useEffect(()=>{(async()=>{try{const r=await K.get("/user/getUsers");console.log(r),F(r.data.users)}catch(r){console.log("Error fetching users",r)}})()},[]);const ve=()=>{let n=!0;return V(""),q(""),H(""),L(""),w.trim()||(V("Name is required"),n=!1),A?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A)||(q("Invalid email format"),n=!1):(q("Email is required"),n=!1),O?/^[0-9]{10}$/.test(O)||(H("Invalid phone number format (e.g., 1234567890)"),n=!1):(H("Phone number is required"),n=!1),B?B.length<6&&(L("Password should be at least 6 characters long"),n=!1):(L("Password is required"),n=!1),n},Se=(n,r)=>{r!==""&&(W(E===r&&P==="asc"?"desc":"asc"),$(r))},ee=(n,r)=>{z(!1)},Ce=n=>{if(n.target.checked){const r=d.map(x=>x.fullName);T(r);return}T([])},Re=()=>{b(!0)},ke=(n,r)=>{const x=t.indexOf(r);let f=[];x===-1?f=f.concat(t,r):x===0?f=f.concat(t.slice(1)):x===t.length-1?f=f.concat(t.slice(0,-1)):x>0&&(f=f.concat(t.slice(0,x),t.slice(x+1))),T(f)},Pe=(n,r)=>{g(r)},Te=n=>{g(0),R(parseInt(n.target.value,10))},Ee=n=>{g(0),C(n.target.value)},ne=De({inputData:d,comparator:_e(P,E),filterName:S}),Ie=async n=>{if(n.preventDefault(),!ve())return;const r=new FormData;r.append("name",w),r.append("email",A),r.append("phone",O),r.append("password",B),r.append("file",me);try{(await K.post("/user/createAdminUser",r,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"multipart/form-data"}})).status===201&&(U(),_("User added successfully!"),D("success"),z(!0))}catch(x){console.error("Error adding user:",x),_("Error adding user. Please try again."),D("error"),z(!0)}},Ne=!ne.length&&!!S;return e.jsxs(Qe,{children:[e.jsxs(h,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(v,{variant:"h4",children:"Users"}),e.jsx(I,{variant:"contained",color:"inherit",onClick:Re,startIcon:e.jsx(N,{icon:"eva:plus-fill"}),children:"New User"})]}),e.jsxs(Ve,{children:[e.jsx(pe,{numSelected:t.length,filterName:S,onFilterName:Ee}),e.jsx(Ae,{children:e.jsx($e,{sx:{overflow:"unset"},children:e.jsxs(we,{sx:{minWidth:800},children:[e.jsx(ce,{order:P,orderBy:E,rowCount:d.length,numSelected:t.length,onRequestSort:Se,onSelectAllClick:Ce,headLabel:[{id:"fullName",label:"Name"},{id:"company",label:"Email"},{id:"role",label:"Role"},{id:"isVerified",label:"Phone Number",align:"center"},{id:"status",label:"Status"},{id:"actions",label:"Actions"},{id:""}]}),e.jsxs(qe,{children:[ne.slice(c*y,c*y+y).map(n=>e.jsx(oe,{id:n==null?void 0:n.id,name:n==null?void 0:n.fullName,role:n==null?void 0:n.role,status:n==null?void 0:n.status,company:n==null?void 0:n.email,avatarUrl:n.profileImage&&n.profileImage,isVerified:n==null?void 0:n.phone,selected:t.indexOf(n==null?void 0:n.fullName)!==-1,handleClick:r=>ke(r,n==null?void 0:n.fullName)},n==null?void 0:n.id)),e.jsx(de,{height:77,emptyRows:Ze(c,y,d.length)}),Ne&&e.jsx(le,{query:S})]}),e.jsx(J,{open:s,onClose:p,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx(j,{sx:ie,children:e.jsxs(h,{spacing:2,mt:2,width:500,children:[e.jsx(k,{id:"outlined-basic",label:"Heading",variant:"outlined"}),e.jsx(k,{id:"outlined-basic",label:"Description",variant:"outlined"}),e.jsx(I,{variant:"contained",color:"inherit",children:"Upload Image"})]})})})]})})}),e.jsx(He,{page:c,component:"div",count:d.length,rowsPerPage:y,onPageChange:Pe,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:Te})]}),e.jsx(J,{open:m,onClose:U,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx(j,{sx:ie,borderRadius:3,children:e.jsxs(h,{spacing:2,mt:2,width:800,children:[e.jsx(v,{children:"Add New User"}),e.jsx(k,{id:"name",label:"Name",variant:"outlined",value:w,onChange:n=>he(n.target.value),error:!!Q,helperText:Q}),e.jsx(k,{id:"email",label:"Email",variant:"outlined",type:"email",value:A,onChange:n=>xe(n.target.value),error:!!X,helperText:X}),e.jsx(k,{id:"phone",label:"Phone",type:"phone",variant:"outlined",value:O,onChange:n=>ge(n.target.value),error:!!Y,helperText:Y}),e.jsx(k,{id:"password",label:"Password",type:"password",variant:"outlined",value:B,onChange:n=>ue(n.target.value),error:!!Z,helperText:Z}),e.jsxs(I,{variant:"contained",component:"label",color:"info",children:["Upload File",e.jsx("input",{type:"file",hidden:!0,onChange:n=>fe(n.target.files[0])})]}),e.jsx(I,{variant:"contained",color:"inherit",sx:{width:"150px",alignSelf:"center"},onClick:Ie,children:"Save"})]})})}),e.jsx(Le,{open:je,autoHideDuration:6e3,onClose:ee,children:e.jsx(ze,{onClose:ee,severity:ye,variant:"filled",sx:{width:"100%"},children:be})})]})}const ie={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4};function hn(){return e.jsxs(e.Fragment,{children:[e.jsx(Oe,{children:e.jsx("title",{children:" User | Minimal UI "})}),e.jsx(en,{})]})}export{hn as default};
