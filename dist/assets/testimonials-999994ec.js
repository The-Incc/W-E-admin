import{j as e,S as c,a as B,T as v,B as u,l as U,bS as q,P as l,r as n,bT as z,aE as G,bU as I,W as H}from"./index-f18ba23b.js";import{b as V}from"./format-time-f048003d.js";import{a as $,G as D}from"./format-number-76318b13.js";import{C as J}from"./Card-fedbf765.js";import{L as K}from"./Link-2eb9b44b.js";import"./blog-d9677a0b.js";import{C as Q}from"./Container-c72d9e4b.js";import{B as j}from"./Button-4497fecf.js";import{T as h}from"./TextField-72fc734d.js";import"./Menu-68622a83.js";function E({post:x,index:r}){const{name:d,createdAt:g}=x,t=r===0,i=r===1||r===2,p=e.jsx(K,{color:"inherit",variant:"subtitle2",underline:"hover",sx:{height:44,overflow:"hidden",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical",...t&&{typography:"h5",height:60},...(t||i)&&{color:"common.white"}},children:d}),b=e.jsx(c,{direction:"row",flexWrap:"wrap",spacing:1.5,justifyContent:"flex-end",sx:{mt:3,color:"text.disabled"},children:[{number:0,icon:"eva:message-circle-fill"},{number:0,icon:"eva:eye-fill"},{number:0,icon:"eva:share-fill"}].map((o,w)=>e.jsxs(c,{direction:"row",sx:{...(t||i)&&{opacity:.48,color:"common.white"}},children:[e.jsx(B,{width:16,icon:o.icon,sx:{mr:.5}}),e.jsx(v,{variant:"caption",children:$(o.number)})]},w))}),m=e.jsx(u,{component:"img",src:"https://www.freepik.com/free-photos-vectors/white",sx:{top:0,width:1,height:1,objectFit:"cover",position:"absolute"}}),f=e.jsx(v,{variant:"caption",component:"div",sx:{mb:2,color:"text.disabled",...(t||i)&&{opacity:.48,color:"common.white"}},children:V(g)}),y=e.jsx(q,{color:"paper",src:"/assets/icons/shape-avatar.svg",sx:{width:80,height:36,zIndex:9,bottom:-15,position:"absolute",color:"background.paper",...(t||i)&&{display:"none"}}});return e.jsx(D,{xs:12,sm:t?12:6,md:t?6:3,children:e.jsxs(J,{children:[e.jsxs(u,{sx:{position:"relative",pt:"calc(100% * 3 / 4)",...(t||i)&&{pt:"calc(100% * 4 / 3)","&:after":{top:0,content:"''",width:"100%",height:"100%",position:"absolute",bgcolor:o=>U(o.palette.grey[900],.72)}},...t&&{pt:{xs:"calc(100% * 4 / 3)",sm:"calc(100% * 3 / 4.66)"}}},children:[y,m]}),e.jsxs(u,{sx:{p:o=>o.spacing(4,3,3,3),...(t||i)&&{width:1,bottom:0,position:"absolute"}},children:[f,p,b]})]})})}E.propTypes={post:l.object.isRequired,index:l.number};l.array,l.func;l.array.isRequired;function X(){const[x,r]=n.useState(!1),[d,g]=n.useState(""),[t,i]=n.useState(""),[p,b]=n.useState(null),[m,f]=n.useState(""),[y,o]=n.useState(!1),[w,C]=n.useState(""),[Z,S]=n.useState("success"),[L,P]=n.useState([]),{token:O}=n.useContext(z),A=()=>r(!0),T=()=>r(!1),F=a=>{g(a.target.value)},M=a=>{i(a.target.value)},N=a=>{f(a.target.value)},R=a=>{b(a.target.files[0])},W=async a=>{a.preventDefault();const s=new FormData;s.append("name",t),s.append("description",d),s.append("location",m),p&&s.append("file",p);try{(await I.post("/testimonial/add-testimonial",s,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${O}`}})).status===201&&(T(),S("success"),C("Testimonial added successfully!"),o(!0))}catch(k){console.error("Error adding Testimonial:",k),S("error"),C("Error adding Testimonial. Please try again."),o(!0)}};return n.useEffect(()=>{(async()=>{try{const s=await I.get("/testimonial/get-all-testimonials");console.log(s.data.testimonials),P(s.data.testimonials)}catch(s){console.log("Error fetching testimonials",s)}})()},[]),e.jsxs(Q,{children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(v,{variant:"h4",children:"Testmonials"}),e.jsx(j,{variant:"contained",color:"inherit",onClick:A,startIcon:e.jsx(B,{icon:"eva:plus-fill"}),children:"Add Testimonial"}),e.jsx(G,{open:x,onClose:T,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx(u,{sx:Y,borderRadius:3,children:e.jsxs(c,{spacing:2,mt:2,width:800,children:[e.jsx(h,{id:"outlined-basic",label:"Heading",variant:"outlined"}),e.jsx(h,{label:"Name",variant:"outlined",value:t,onChange:M}),e.jsx(h,{label:"Description",variant:"outlined",value:d,onChange:F}),e.jsx(h,{label:"Location",variant:"outlined",value:m,onChange:N}),e.jsxs(j,{variant:"contained",component:"label",color:"inherit",sx:{width:"150px",alignSelf:"center"},children:["Upload Image",e.jsx("input",{type:"file",hidden:!0,onChange:R})]}),e.jsx(j,{variant:"contained",color:"inherit",sx:{width:"150px",alignSelf:"center"},onClick:W,children:"Save"})]})})})]}),e.jsx(c,{mb:5,direction:"row",alignItems:"center",justifyContent:"space-between"}),e.jsx(D,{container:!0,spacing:3,children:L.map((a,s)=>e.jsx(E,{post:a,index:s},a.id))})]})}const Y={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4};function le(){return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx("title",{children:" Testimonial | Minimal UI "})}),e.jsx(X,{})]})}export{le as default};
